name: ðŸš€
on:
  push:
    tags:
      - '[0-9]+.[0-9]+.[0-9]+'
  # Register workflow and the name into GitHub. It makes it possible to be ran from CLI even if not to be merged in default beanch
  pull_request:
  # For existing tags: `gh workflow run 'ðŸš€' --ref '1.0.0'`
  workflow_dispatch:

jobs:
  release:
    if: startsWith(github.ref, 'refs/tags/')
    runs-on: ubuntu-24.04
    timeout-minutes: 30
    env:
      GH_TOKEN: ${{ github.token }}
    steps:
      # Required to checkout for gh command
      - uses: actions/checkout@v4
      - name: Wait other jobs
        uses: kachick/wait-other-jobs@v3
        timeout-minutes: 15
      - run: |
          gh release create --verify-tag "$GITHUB_REF_NAME" --title "$GITHUB_REF_NAME"
